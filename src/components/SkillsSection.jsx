import { useRef } from "react";
import { gsap } from "gsap";
import { useGSAP } from "@gsap/react";
import "../styles/SkillsSection.css";

// SVG icons for technologies
const TechIcons = {
  // Frontend
  react: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 13.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" />
      <path d="M12 21.35c-1.1 0-2.1-.2-3-.55-1.8-.7-3.2-2-4.1-3.6-.5-.9-.8-1.9-.9-2.9-.1-1 .1-2 .4-2.9.3-.9.8-1.7 1.4-2.4.6-.7 1.3-1.2 2.1-1.6.8-.4 1.6-.6 2.5-.7.9-.1 1.8 0 2.6.2.8.2 1.6.5 2.3.9.7.4 1.3.9 1.8 1.5.5.6.9 1.2 1.2 1.9.3.7.5 1.4.5 2.2 0 .8-.1 1.5-.4 2.2-.3.7-.7 1.4-1.2 2-.5.6-1.1 1.1-1.8 1.5-.7.4-1.5.7-2.3.9-.8.2-1.7.3-2.6.2-.6 0-1.1-.1-1.5-.2ZM12 6c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6Z" />
      <ellipse
        cx="12"
        cy="12"
        rx="10"
        ry="4"
        fill="none"
        stroke="currentColor"
        strokeWidth="1"
      />
      <ellipse
        cx="12"
        cy="12"
        rx="10"
        ry="4"
        fill="none"
        stroke="currentColor"
        strokeWidth="1"
        transform="rotate(60 12 12)"
      />
      <ellipse
        cx="12"
        cy="12"
        rx="10"
        ry="4"
        fill="none"
        stroke="currentColor"
        strokeWidth="1"
        transform="rotate(120 12 12)"
      />
    </svg>
  ),
  vue: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M2 3h3.5L12 13.5 18.5 3H22L12 21 2 3Zm5 0h3l2 3.5L14 3h3l-5 8.5L7 3Z" />
    </svg>
  ),
  nuxt: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M13.4 21H3.6c-.5 0-1-.1-1.4-.4-.4-.3-.7-.6-.9-1.1-.2-.5-.2-1-.1-1.5.1-.5.4-.9.7-1.3l6-10c.3-.4.6-.8 1.1-1 .5-.2 1-.2 1.5-.1.5.1.9.4 1.2.8l2.3 3.8 2.3-3.8c.3-.4.7-.7 1.2-.8.5-.1 1-.1 1.5.1.5.2.8.6 1.1 1l4.3 7c.3.4.5.8.6 1.3.1.5 0 1-.2 1.5-.2.5-.5.8-.9 1.1-.4.3-.9.4-1.4.4h-4.6l-4.5-7.4-4.5 7.4Z" />
    </svg>
  ),
  typescript: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M3 3h18v18H3V3Zm10.7 13.5v-1.9c.3.2.6.4 1 .5.4.1.8.2 1.2.2.3 0 .5 0 .7-.1.2-.1.3-.1.4-.2.1-.1.2-.2.2-.3.1-.1.1-.3.1-.4 0-.2 0-.4-.1-.5-.1-.2-.2-.3-.4-.4-.2-.1-.3-.2-.5-.3l-.7-.3c-.3-.1-.6-.3-.8-.4-.3-.2-.5-.3-.7-.5-.2-.2-.4-.4-.5-.7-.1-.3-.2-.6-.2-1 0-.5.1-.9.3-1.2.2-.3.5-.6.8-.8.3-.2.7-.4 1.1-.5.4-.1.8-.1 1.2-.1.4 0 .8 0 1.2.1.4.1.7.2 1 .3v1.8c-.2-.1-.4-.2-.6-.3-.2-.1-.4-.2-.6-.2-.2-.1-.4-.1-.6-.1-.2 0-.4 0-.5 0-.2 0-.3.1-.5.1-.1.1-.2.1-.3.2-.1.1-.1.2-.1.4 0 .1 0 .3.1.4.1.1.2.2.3.3.1.1.3.2.5.3l.6.3c.4.1.7.3 1 .5.3.2.5.4.7.6.2.2.3.5.4.7.1.3.1.6.1.9 0 .5-.1.9-.3 1.3-.2.4-.5.6-.8.9-.3.2-.7.4-1.2.5-.4.1-.9.2-1.4.2-.4 0-.9 0-1.3-.1-.4-.1-.8-.2-1.1-.4ZM9.5 10.2H7V9h6.8v1.2h-2.5v6.3H9.5v-6.3Z" />
    </svg>
  ),
  gsap: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8Zm-1-13h2v6h-2V7Zm0 8h2v2h-2v-2Z" />
      <circle cx="12" cy="12" r="3" fill="currentColor" />
    </svg>
  ),
  astro: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M16.074 16.86c-.72.616-2.157 1.035-3.812 1.035-2.032 0-3.735-.632-4.187-1.483-.161.488-.198 1.046-.198 1.402 0 0-.106 1.75 1.111 2.968 0-.632.513-1.145 1.145-1.145 1.083 0 1.082.945 1.081 1.712v.069c0 1.164.711 2.161 1.723 2.582a2.347 2.347 0 0 1-.236-1.029c0-1.11.652-1.523 1.41-2.003.602-.381 1.263-.799 1.692-1.64a3.31 3.31 0 0 0 .271-1.468ZM15.551 3.199c.263.156.479.426.603.756l3.166 8.438a19.628 19.628 0 0 0-3.895-1.236l-1.297-4.14a.27.27 0 0 0-.257-.19.27.27 0 0 0-.258.19l-1.287 4.122a19.63 19.63 0 0 0-3.915 1.26l3.156-8.444c.124-.33.34-.6.603-.756a1.1 1.1 0 0 1 1.144 0c.134.08.478.296.618.376.141.08.479.024.619-.026.141-.05.37-.26.5-.35Z" />
    </svg>
  ),
  // Backend
  nodejs: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 21.985c-.275 0-.532-.073-.772-.202l-2.439-1.448c-.365-.203-.182-.277-.072-.319.487-.165.583-.202 1.101-.489.056-.028.127-.018.183.015l1.872 1.111c.071.037.171.037.232 0l7.289-4.211c.071-.039.116-.116.116-.199V7.823c0-.087-.045-.166-.12-.206l-7.278-4.2c-.069-.041-.166-.041-.235 0l-7.277 4.2c-.075.04-.12.119-.12.206v8.42c0 .083.044.159.12.199l1.997 1.155c1.083.543 1.749-.096 1.749-.735V8.597c0-.119.095-.214.213-.214h.932c.116 0 .213.095.213.214v8.265c0 1.441-.785 2.268-2.149 2.268-.419 0-.75 0-1.672-.454l-1.911-1.1A1.559 1.559 0 0 1 2 16.014V7.594c0-.563.301-1.088.786-1.367l7.289-4.213a1.576 1.576 0 0 1 1.572 0l7.289 4.213c.485.279.786.804.786 1.367v8.42c0 .563-.301 1.088-.786 1.367l-7.289 4.213a1.53 1.53 0 0 1-.647.201Z" />
    </svg>
  ),
  express: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M24 18.588a1.529 1.529 0 0 1-1.895-.72l-3.45-4.771-.5-.667-4.003 5.444a1.466 1.466 0 0 1-1.802.708l5.158-6.92-4.798-6.251a1.595 1.595 0 0 1 1.9.666l3.576 4.83 3.596-4.81a1.435 1.435 0 0 1 1.788-.668L21.708 7.9l-2.522 3.283a.666.666 0 0 0 0 .994l4.804 6.412ZM.002 11.576l.42-2.075c1.154-4.103 5.858-5.81 9.094-3.27 1.895 1.489 2.368 3.597 2.275 5.973H1.116C.943 16.447 4.005 19.009 7.92 17.7a4.078 4.078 0 0 0 2.582-2.876c.207-.666.548-.78 1.174-.588a5.417 5.417 0 0 1-2.589 3.957 6.272 6.272 0 0 1-7.306-.933 6.575 6.575 0 0 1-1.64-3.858c0-.235-.08-.455-.134-.666A88.33 88.33 0 0 1 0 11.577Zm1.127-.286h9.654c-.06-3.076-2.001-5.258-4.59-5.278-2.882-.04-4.944 2.094-5.071 5.264Z" />
    </svg>
  ),
  postgresql: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M17.128 0a10.134 10.134 0 0 0-2.755.403l-.063.02A10.922 10.922 0 0 0 12.6.258C11.422.238 10.401.524 9.594 1.01c-.618-.157-1.263-.258-1.882-.293-.743-.043-1.498.016-2.143.236-.672.228-1.263.583-1.72 1.121-.455.536-.77 1.204-.897 1.991-.127.786-.058 1.685.14 2.664.195.969.53 2.01.968 3.098.436 1.088.975 2.219 1.6 3.344.626 1.125 1.337 2.24 2.11 3.293.773 1.054 1.606 2.042 2.468 2.9.862.858 1.75 1.584 2.617 2.11.867.526 1.707.85 2.465.921.757.072 1.43-.111 1.954-.49.523-.378.893-.933 1.125-1.584.23-.651.323-1.395.297-2.177-.027-.783-.171-1.604-.423-2.41v-.003A22.397 22.397 0 0 0 22.5 8.625c0-.028-.006-.054-.008-.082a10.122 10.122 0 0 0-2.467-5.956A10.09 10.09 0 0 0 17.127 0Z" />
    </svg>
  ),
  prisma: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M21.807 18.285L13.553.756a1.324 1.324 0 0 0-1.129-.754 1.31 1.31 0 0 0-1.206.626l-8.952 14.5a1.356 1.356 0 0 0 .016 1.455l4.376 6.778a1.408 1.408 0 0 0 1.58.581l12.703-3.757c.389-.115.707-.39.873-.755s.164-.783-.007-1.145Zm-1.848.752L9.18 22.224a.452.452 0 0 1-.575-.52l3.85-18.438c.072-.345.549-.4.699-.08l8.138 17.358a.452.452 0 0 1-.333.493Z" />
    </svg>
  ),
  api: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M7 7H5a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-3H7v3H5V9h2v2h2V9a2 2 0 0 0-2-2Zm6 0h-2v12h2v-5h2a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2Zm0 5V9h2v3h-2Zm6 0h2v7h-2v-7Zm4 0h-2V9a2 2 0 0 1 2-2h2v2h-2v3Z" />
    </svg>
  ),
  // Mobile
  swift: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M7.508 0c-.287 0-.573 0-.86.002-.241.002-.483.003-.724.01-.132.003-.263.009-.395.015A9.154 9.154 0 0 0 4.348.2a5.677 5.677 0 0 0-.96.296 4.107 4.107 0 0 0-.836.472 3.823 3.823 0 0 0-.667.641c-.198.249-.371.517-.507.804a5.75 5.75 0 0 0-.298.966 9.516 9.516 0 0 0-.17 1.18c-.007.132-.012.263-.016.395a32.078 32.078 0 0 0-.008.725c-.002.287-.002.574-.002.86v11.12c0 .287 0 .574.002.86.001.242.003.484.008.725.004.132.01.264.016.396.015.4.053.8.115 1.18.062.38.157.757.296.966a4.09 4.09 0 0 0 .473.836c.197.246.428.47.64.667.249.199.517.371.805.508.306.16.628.269.966.297.38.062.78.1 1.18.115.132.007.263.012.395.016.241.005.483.007.724.008.287.002.573.002.86.002h8.984c.287 0 .573 0 .86-.002.241-.001.483-.003.724-.008.132-.004.263-.009.395-.016.4-.015.8-.053 1.18-.115.38-.062.758-.157.966-.297a4.1 4.1 0 0 0 .836-.472c.246-.197.47-.428.667-.64.199-.249.371-.518.508-.806.16-.306.269-.628.297-.966.062-.38.1-.78.115-1.18.006-.132.012-.264.016-.396.005-.241.007-.483.008-.724.002-.287.002-.574.002-.86V5.52c0-.287 0-.574-.002-.86a32.06 32.06 0 0 0-.008-.725c-.004-.132-.01-.264-.016-.395a9.517 9.517 0 0 0-.115-1.18 5.754 5.754 0 0 0-.297-.966 4.09 4.09 0 0 0-.472-.836 3.812 3.812 0 0 0-.64-.667 4.089 4.089 0 0 0-.806-.508 5.677 5.677 0 0 0-.966-.296 9.138 9.138 0 0 0-1.18-.115c-.132-.006-.263-.012-.395-.015a31.85 31.85 0 0 0-.724-.01c-.287-.002-.573-.002-.86-.002H7.508Zm5.023 3.916c4.972 3.26 3.973 7.85 3.973 7.85s1.79 2.027 1.2 3.903c-.742.8-1.85.073-2.502-.56-.975-.95-1.78-1.79-2.424-2.448-4.113 2.877-8.161.56-8.161.56s2.715 2.178 5.707 3.498c-1.163-.056-3.346-.473-5.42-2.132-.34-.288-.68-.592-1.002-.915-.015.115-.02.232-.015.35.01.2.05.4.11.59.54 1.787 1.963 3.15 3.662 3.786-.017.08-.018.168-.01.258.023.207.072.41.14.605-1.15-.304-2.225-.86-3.128-1.622a7.986 7.986 0 0 1-.74-.68c.22 1.596 1.012 3.058 2.23 4.08a7.97 7.97 0 0 0 2.68 1.566 8.006 8.006 0 0 0 6.036-.222 7.985 7.985 0 0 0 2.45-1.766c.03-.032.062-.063.09-.096-.28.04-.558.06-.84.058-.78-.003-1.55-.144-2.282-.41-1.73-.635-3.075-1.96-3.71-3.656a6.06 6.06 0 0 1-.282-1.04 8.24 8.24 0 0 1-.114-.95c.8.93 1.89 1.55 3.1 1.78 1.2.23 2.45.06 3.545-.47 1.095-.532 1.988-1.404 2.54-2.486.55-1.08.73-2.32.51-3.52-1.08.06-2.34-.26-3.345-.784a8.53 8.53 0 0 1-3.103-2.903 8.478 8.478 0 0 1-1.294-3.876Z" />
    </svg>
  ),
  swiftui: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0Zm5.894 16.394c-.22.48-.584.862-1.025 1.117-.44.255-.948.365-1.467.312-.52-.053-.997-.27-1.377-.622-.38-.353-.646-.824-.762-1.353-.116-.528-.074-1.087.121-1.59.195-.503.542-.926.996-1.2.454-.275.995-.39 1.536-.329.54.061 1.027.288 1.39.64.39.38.647.89.72 1.44.073.55-.02 1.11-.26 1.585l-.002.002.13-.002Zm-3.478-4.472c-.795.39-1.448 1.012-1.88 1.79-.434.78-.623 1.67-.545 2.565.078.894.423 1.745.99 2.445.57.7 1.334 1.22 2.198 1.49-1.088.4-2.27.489-3.412.256-1.14-.233-2.183-.79-3.01-1.598-.83-.81-1.408-1.847-1.67-2.988-.26-1.14-.19-2.33.2-3.425-1.35-.69-2.452-1.77-3.16-3.1a8.71 8.71 0 0 1-.91-4.27c.49.69 1.056 1.32 1.693 1.884 1.34 1.18 2.983 1.95 4.74 2.218 1.75.27 3.55.033 5.17-.677l.002-.002-.406.412Z" />
    </svg>
  ),
  apple: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11Z" />
    </svg>
  ),
  cgevent: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z" />
    </svg>
  ),
  // Tools
  git: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M23.546 10.93L13.067.452a1.55 1.55 0 0 0-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 0 1 2.327 2.341l2.658 2.66a1.838 1.838 0 0 1 1.9 3.039 1.837 1.837 0 0 1-2.6 0 1.846 1.846 0 0 1-.404-1.996L12.86 8.955v6.525a1.844 1.844 0 1 1-1.512 0V8.717a1.838 1.838 0 0 1-.997-2.411L7.636 3.59.453 10.772a1.55 1.55 0 0 0 0 2.188l10.48 10.477a1.55 1.55 0 0 0 2.186 0l10.427-10.32a1.55 1.55 0 0 0 0-2.187Z" />
    </svg>
  ),
  docker: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M13.983 11.078h2.119a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.119a.185.185 0 0 0-.185.185v1.888c0 .102.083.185.185.185Zm-2.954-5.43h2.118a.186.186 0 0 0 .186-.186V3.574a.186.186 0 0 0-.186-.185h-2.118a.185.185 0 0 0-.185.185v1.888c0 .102.082.185.185.186Zm0 2.716h2.118a.187.187 0 0 0 .186-.186V6.29a.186.186 0 0 0-.186-.185h-2.118a.185.185 0 0 0-.185.185v1.887c0 .102.082.186.185.186Zm-2.93 0h2.12a.186.186 0 0 0 .184-.186V6.29a.185.185 0 0 0-.185-.185H8.1a.185.185 0 0 0-.185.185v1.887c0 .102.083.186.185.186Zm-2.964 0h2.12a.186.186 0 0 0 .184-.186V6.29a.185.185 0 0 0-.184-.185h-2.12a.185.185 0 0 0-.184.185v1.887c0 .102.083.186.185.186Zm5.893 2.715h2.118a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.118a.185.185 0 0 0-.185.185v1.888c0 .102.082.185.185.185Zm-2.93 0h2.12a.185.185 0 0 0 .184-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.185.185 0 0 0-.184.185v1.888c0 .102.083.185.185.185Zm-2.964 0h2.12a.185.185 0 0 0 .184-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.185.185 0 0 0-.184.185v1.888c0 .102.083.185.185.185Zm-2.92 0h2.12a.185.185 0 0 0 .184-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.186.186 0 0 0-.186.186v1.887c0 .102.084.185.186.185Zm10.779 2.715h2.118a.185.185 0 0 0 .186-.186v-1.887a.185.185 0 0 0-.186-.185h-2.118a.185.185 0 0 0-.185.185v1.887c0 .103.082.186.185.186Zm0 0" />
    </svg>
  ),
  cloudflare: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="m16.509 15.731.028-.063a1.199 1.199 0 0 0-.212-1.273 1.085 1.085 0 0 0-.876-.408l-8.693.09a.267.267 0 0 1-.195-.085.187.187 0 0 1-.057-.145c.007-.051.034-.101.073-.141a.252.252 0 0 1 .172-.073l8.776-.123c.9-.092 1.899-.965 2.221-1.94l.47-1.47a.358.358 0 0 0 .014-.157 5.312 5.312 0 0 0-10.307-1.27 3.56 3.56 0 0 0-5.537 2.63c0 .063.004.126.008.189a4.286 4.286 0 0 0 .053 8.522l13.629.014a.414.414 0 0 0 .37-.211l.063-.086Z" />
    </svg>
  ),
  vercel: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M24 22.525H0l12-21.05 12 21.05Z" />
    </svg>
  ),
  vite: (
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M11.987 14.138l-3.132 4.923-5.193-8.427-.012 8.822H0V4.544h3.691l5.247 8.833.005-3.998 3.044 4.759Zm.601-5.761c.024-.048 0-3.784.008-3.833h-3.65c.002.059-.005 3.776-.003 3.833h3.645ZM20.71 4.544c-.195.41-.024 8.457-.024 8.457L24 4.544h-3.29Zm-5.63 3.833c-.024.048 0 11.078-.008 11.078h3.654c-.004-.059.003-11.019.003-11.078h-3.649Z" />
    </svg>
  ),
  // Category icons
  layout: (
    <svg
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
      <line x1="3" y1="9" x2="21" y2="9" />
      <line x1="9" y1="21" x2="9" y2="9" />
    </svg>
  ),
  server: (
    <svg
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <rect x="2" y="2" width="20" height="8" rx="2" ry="2" />
      <rect x="2" y="14" width="20" height="8" rx="2" ry="2" />
      <line x1="6" y1="6" x2="6.01" y2="6" />
      <line x1="6" y1="18" x2="6.01" y2="18" />
    </svg>
  ),
  smartphone: (
    <svg
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <rect x="5" y="2" width="14" height="20" rx="2" ry="2" />
      <line x1="12" y1="18" x2="12.01" y2="18" />
    </svg>
  ),
  tool: (
    <svg
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76Z" />
    </svg>
  ),
};

const SkillCard = ({ skill, delay }) => {
  const cardRef = useRef(null);

  return (
    <div
      ref={cardRef}
      className="skill-card"
      style={{ "--delay": `${delay}ms` }}
    >
      <div className="skill-icon">{TechIcons[skill.icon] || TechIcons.api}</div>
      <div className="skill-info">
        <span className="skill-name">{skill.name}</span>
        <div className="skill-bar-container">
          <div className="skill-bar" style={{ "--level": `${skill.level}%` }} />
        </div>
      </div>
    </div>
  );
};

const CategoryCard = ({ category, index }) => {
  return (
    <div className="category-card" style={{ "--index": index }}>
      <div className="category-header">
        <div className="category-icon">{TechIcons[category.icon]}</div>
        <h3 className="category-title">{category.title}</h3>
      </div>
      <div className="skills-grid">
        {category.skills.map((skill, skillIndex) => (
          <SkillCard key={skill.name} skill={skill} delay={skillIndex * 100} />
        ))}
      </div>
    </div>
  );
};

const SkillsSection = ({ skillsRef, skillCategories = [] }) => {
  const sectionRef = useRef(null);

  useGSAP(
    () => {
      if (!skillCategories.length) return;

      const section = sectionRef.current;
      const header = section.querySelector(".skills-header");
      const cards = section.querySelectorAll(".category-card");

      // Header animation
      gsap.fromTo(
        header,
        { y: 50, opacity: 0 },
        {
          y: 0,
          opacity: 1,
          duration: 0.8,
          ease: "power3.out",
          scrollTrigger: {
            trigger: section,
            start: "top 80%",
            toggleActions: "play none none reverse",
          },
        }
      );

      // Stagger cards animation
      gsap.fromTo(
        cards,
        { y: 80, opacity: 0 },
        {
          y: 0,
          opacity: 1,
          duration: 0.8,
          ease: "power3.out",
          stagger: 0.15,
          scrollTrigger: {
            trigger: section,
            start: "top 70%",
            toggleActions: "play none none reverse",
          },
        }
      );

      // Skill bars animation
      const skillBars = section.querySelectorAll(".skill-bar");
      skillBars.forEach((bar) => {
        gsap.fromTo(
          bar,
          { scaleX: 0 },
          {
            scaleX: 1,
            duration: 1,
            ease: "power2.out",
            scrollTrigger: {
              trigger: bar,
              start: "top 90%",
              toggleActions: "play none none reverse",
            },
          }
        );
      });
    },
    { scope: sectionRef, dependencies: [skillCategories] }
  );

  if (!skillCategories.length) return null;

  return (
    <div ref={sectionRef} className="skills-section">
      <div ref={skillsRef} className="skills-anchor" />
      <div className="skills-header">
        <h2 className="section-title">Tech Stack</h2>
        <p className="section-subtitle">
          Technologies and tools I work with to bring ideas to life
        </p>
      </div>
      <div className="categories-grid">
        {skillCategories.map((category, index) => (
          <CategoryCard key={category.id} category={category} index={index} />
        ))}
      </div>
    </div>
  );
};

export default SkillsSection;
